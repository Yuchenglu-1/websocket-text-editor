<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <title>消息队列演示</title>-->
<!--    <meta charset="utf-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1">-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">-->
<!--    <style>-->
<!--        body {-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--        .message-log {-->
<!--            height: 300px;-->
<!--            overflow-y: auto;-->
<!--            background-color: #fff;-->
<!--            border: 1px solid #dee2e6;-->
<!--            border-radius: 0.375rem;-->
<!--            padding: 1rem;-->
<!--        }-->
<!--        .log-entry {-->
<!--            margin-bottom: 0.5rem;-->
<!--            padding: 0.5rem;-->
<!--            border-radius: 0.25rem;-->
<!--        }-->
<!--        .log-entry.sent {-->
<!--            background-color: #d1ecf1;-->
<!--            border-left: 3px solid #0dcaf0;-->
<!--        }-->
<!--        .log-entry.received {-->
<!--            background-color: #d4edda;-->
<!--            border-left: 3px solid #28a745;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container py-4">-->
<!--        &lt;!&ndash; 导航栏 &ndash;&gt;-->
<!--        <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">-->
<!--            <div class="container-fluid">-->
<!--                <a class="navbar-brand" href="/"><i class="fas fa-code me-2"></i>Code Share Editor</a>-->
<!--                <div class="navbar-nav ms-auto">-->
<!--                    <a class="nav-link text-white" href="/"><i class="fas fa-home me-1"></i>首页</a>-->
<!--                    <a class="nav-link text-white" href="/editor"><i class="fas fa-edit me-1"></i>编辑器</a>-->
<!--                </div>-->
<!--            </div>-->
<!--        </nav>-->

<!--        <div class="row">-->
<!--            <div class="col-12">-->
<!--                <div class="card shadow-sm">-->
<!--                    <div class="card-header bg-info text-white">-->
<!--                        <h5 class="mb-0"><i class="fas fa-envelope me-2"></i>消息队列演示</h5>-->
<!--                    </div>-->
<!--                    <div class="card-body">-->
<!--                        <div class="row">-->
<!--                            &lt;!&ndash; 发送消息区域 &ndash;&gt;-->
<!--                            <div class="col-md-6">-->
<!--                                <h6><i class="fas fa-paper-plane me-2"></i>发送消息</h6>-->
<!--                                -->
<!--                                &lt;!&ndash; 发送任务消息 &ndash;&gt;-->
<!--                                <div class="card mb-3">-->
<!--                                    <div class="card-header">-->
<!--                                        发送任务消息-->
<!--                                    </div>-->
<!--                                    <div class="card-body">-->
<!--                                        <form id="taskForm">-->
<!--                                            <div class="mb-2">-->
<!--                                                <label class="form-label">任务标题</label>-->
<!--                                                <input type="text" class="form-control" id="taskTitle" value="新任务">-->
<!--                                            </div>-->
<!--                                            <div class="mb-2">-->
<!--                                                <label class="form-label">任务描述</label>-->
<!--                                                <textarea class="form-control" id="taskDescription">这是一个新创建的任务</textarea>-->
<!--                                            </div>-->
<!--                                            <button type="submit" class="btn btn-primary btn-sm w-100">-->
<!--                                                <i class="fas fa-paper-plane me-1"></i>发送任务消息-->
<!--                                            </button>-->
<!--                                        </form>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                -->
<!--                                &lt;!&ndash; 发送评论消息 &ndash;&gt;-->
<!--                                <div class="card mb-3">-->
<!--                                    <div class="card-header">-->
<!--                                        发送评论消息-->
<!--                                    </div>-->
<!--                                    <div class="card-body">-->
<!--                                        <form id="commentForm">-->
<!--                                            <div class="mb-2">-->
<!--                                                <label class="form-label">评论内容</label>-->
<!--                                                <textarea class="form-control" id="commentContent">这是一条新评论</textarea>-->
<!--                                            </div>-->
<!--                                            <div class="mb-2">-->
<!--                                                <label class="form-label">评论者</label>-->
<!--                                                <input type="text" class="form-control" id="commentAuthor" value="用户1">-->
<!--                                            </div>-->
<!--                                            <button type="submit" class="btn btn-success btn-sm w-100">-->
<!--                                                <i class="fas fa-comment me-1"></i>发送评论消息-->
<!--                                            </button>-->
<!--                                        </form>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                -->
<!--                                &lt;!&ndash; 广播消息 &ndash;&gt;-->
<!--                                <div class="card">-->
<!--                                    <div class="card-header">-->
<!--                                        广播消息-->
<!--                                    </div>-->
<!--                                    <div class="card-body">-->
<!--                                        <form id="broadcastForm">-->
<!--                                            <div class="mb-2">-->
<!--                                                <label class="form-label">消息内容</label>-->
<!--                                                <textarea class="form-control" id="broadcastContent">这是一条广播消息</textarea>-->
<!--                                            </div>-->
<!--                                            <button type="submit" class="btn btn-warning btn-sm w-100">-->
<!--                                                <i class="fas fa-bullhorn me-1"></i>广播消息-->
<!--                                            </button>-->
<!--                                        </form>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            -->
<!--                            &lt;!&ndash; 消息日志区域 &ndash;&gt;-->
<!--                            <div class="col-md-6">-->
<!--                                <h6><i class="fas fa-history me-2"></i>消息日志</h6>-->
<!--                                <div class="message-log" id="messageLog">-->
<!--                                    <div class="text-center text-muted">-->
<!--                                        <i class="fas fa-info-circle me-2"></i>消息日志将在这里显示-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="mt-2">-->
<!--                                    <button class="btn btn-sm btn-outline-secondary" id="clearLog">-->
<!--                                        <i class="fas fa-trash me-1"></i>清空日志-->
<!--                                    </button>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Bootstrap JS &ndash;&gt;-->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>-->
<!--    -->
<!--    <script>-->
<!--        // DOM元素-->
<!--        const taskForm = document.getElementById('taskForm');-->
<!--        const commentForm = document.getElementById('commentForm');-->
<!--        const broadcastForm = document.getElementById('broadcastForm');-->
<!--        const messageLog = document.getElementById('messageLog');-->
<!--        const clearLogBtn = document.getElementById('clearLog');-->

<!--        // 添加日志条目-->
<!--        function addLogEntry(message, type) {-->
<!--            // 清空初始提示-->
<!--            if (messageLog.querySelector('.text-muted')) {-->
<!--                messageLog.innerHTML = '';-->
<!--            }-->
<!--            -->
<!--            const entry = document.createElement('div');-->
<!--            entry.className = `log-entry ${type}`;-->
<!--            entry.innerHTML = `-->
<!--                <div class="d-flex justify-content-between">-->
<!--                    <strong>${type === 'sent' ? '发送' : '接收'}</strong>-->
<!--                    <small>${new Date().toLocaleTimeString()}</small>-->
<!--                </div>-->
<!--                <div>${message}</div>-->
<!--            `;-->
<!--            messageLog.appendChild(entry);-->
<!--            -->
<!--            // 滚动到底部-->
<!--            messageLog.scrollTop = messageLog.scrollHeight;-->
<!--        }-->

<!--        // 发送任务消息-->
<!--        taskForm.addEventListener('submit', async function(e) {-->
<!--            e.preventDefault();-->
<!--            -->
<!--            const taskData = {-->
<!--                title: document.getElementById('taskTitle').value,-->
<!--                description: document.getElementById('taskDescription').value,-->
<!--                createdAt: new Date().toISOString()-->
<!--            };-->
<!--            -->
<!--            try {-->
<!--                const response = await fetch('/api/messages/task', {-->
<!--                    method: 'POST',-->
<!--                    headers: {-->
<!--                        'Content-Type': 'application/json'-->
<!--                    },-->
<!--                    body: JSON.stringify(taskData)-->
<!--                });-->
<!--                -->
<!--                const result = await response.json();-->
<!--                addLogEntry(`发送任务消息: ${taskData.title}`, 'sent');-->
<!--                -->
<!--                if (!result.success) {-->
<!--                    addLogEntry(`错误: ${result.message}`, 'received');-->
<!--                }-->
<!--            } catch (error) {-->
<!--                addLogEntry(`发送失败: ${error.message}`, 'received');-->
<!--            }-->
<!--        });-->

<!--        // 发送评论消息-->
<!--        commentForm.addEventListener('submit', async function(e) {-->
<!--            e.preventDefault();-->
<!--            -->
<!--            const commentData = {-->
<!--                content: document.getElementById('commentContent').value,-->
<!--                author: document.getElementById('commentAuthor').value,-->
<!--                createdAt: new Date().toISOString()-->
<!--            };-->
<!--            -->
<!--            try {-->
<!--                const response = await fetch('/api/messages/comment', {-->
<!--                    method: 'POST',-->
<!--                    headers: {-->
<!--                        'Content-Type': 'application/json'-->
<!--                    },-->
<!--                    body: JSON.stringify(commentData)-->
<!--                });-->
<!--                -->
<!--                const result = await response.json();-->
<!--                addLogEntry(`发送评论消息: ${commentData.content.substring(0, 20)}...`, 'sent');-->
<!--                -->
<!--                if (!result.success) {-->
<!--                    addLogEntry(`错误: ${result.message}`, 'received');-->
<!--                }-->
<!--            } catch (error) {-->
<!--                addLogEntry(`发送失败: ${error.message}`, 'received');-->
<!--            }-->
<!--        });-->

<!--        // 广播消息-->
<!--        broadcastForm.addEventListener('submit', async function(e) {-->
<!--            e.preventDefault();-->
<!--            -->
<!--            const broadcastData = {-->
<!--                content: document.getElementById('broadcastContent').value,-->
<!--                type: 'notification',-->
<!--                action: 'notify',-->
<!--                createdAt: new Date().toISOString()-->
<!--            };-->
<!--            -->
<!--            try {-->
<!--                const response = await fetch('/api/messages/broadcast', {-->
<!--                    method: 'POST',-->
<!--                    headers: {-->
<!--                        'Content-Type': 'application/json'-->
<!--                    },-->
<!--                    body: JSON.stringify(broadcastData)-->
<!--                });-->
<!--                -->
<!--                const result = await response.json();-->
<!--                addLogEntry(`广播消息: ${broadcastData.content.substring(0, 20)}...`, 'sent');-->
<!--                -->
<!--                if (!result.success) {-->
<!--                    addLogEntry(`错误: ${result.message}`, 'received');-->
<!--                }-->
<!--            } catch (error) {-->
<!--                addLogEntry(`发送失败: ${error.message}`, 'received');-->
<!--            }-->
<!--        });-->

<!--        // 清空日志-->
<!--        clearLogBtn.addEventListener('click', function() {-->
<!--            messageLog.innerHTML = '<div class="text-center text-muted"><i class="fas fa-info-circle me-2"></i>消息日志将在这里显示</div>';-->
<!--        });-->

<!--        // 模拟接收消息（在实际应用中，这将通过WebSocket实现）-->
<!--        setInterval(function() {-->
<!--            // 这只是一个模拟，实际的消息接收将通过WebSocket实现-->
<!--            if (Math.random() > 0.7) {-->
<!--                const messages = [-->
<!--                    "收到新任务通知",-->
<!--                    "收到新评论通知",-->
<!--                    "系统广播消息",-->
<!--                    "用户活动通知"-->
<!--                ];-->
<!--                const randomMessage = messages[Math.floor(Math.random() * messages.length)];-->
<!--                addLogEntry(randomMessage, 'received');-->
<!--            }-->
<!--        }, 5000);-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->